<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sorry I'm Busy</title>

<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  font-family:Helvetica, Arial, sans-serif;
}
#scene{
  width:100vw;
  height:100vh;
  object-fit:cover;
}
#score{
  position:absolute;
  top:20px;
  left:20px;
  color:white;
  font-size:20px;
}
</style>
</head>

<body>

<div id="score">Score: 10</div>
<img id="scene" src="EmailBeforeLeavingWork.png">

<script>
let score = 10;
let sceneIndex = 0;

const scoreText = document.getElementById("score");
const scene = document.getElementById("scene");

function updateScore(){
  scoreText.innerText = "Score: " + score;
}

// 씬 흐름 정의 (네 시나리오 그대로)
function nextScene(choice){

  switch(sceneIndex){

    case 0: // Email Before Leaving Work
      if(choice==="left") score -=1;
      sceneIndex = 1;
      scene.src = "MessageOnTheStreet.png";
      break;

    case 1: // Message on the Street
      score -=1; // 둘 다 -1 (답장 or 미루기 모두 점유)
      sceneIndex = 2;
      scene.src = "SubwayEntrance.png";
      break;

    case 2: // Subway Entrance
      if(choice==="right"){
        score +=1; // bike
        sceneIndex = 4;
        scene.src = "BeforeRidingBike.png";
      }else{
        sceneIndex = 3;
        scene.src = "OnTheSubwaySeat.png";
      }
      break;

    case 3: // Subway Seat
      if(choice==="left") score -=1;
      sceneIndex = 6;
      scene.src = "NearHomeStreet.png";
      break;

    case 4: // Before Riding Bike
      if(choice==="left") score +=1;
      if(choice==="right") score +=2;
      sceneIndex = 5;
      scene.src = "RidingBikeNiceView.png";
      break;

    case 5: // Riding Bike Nice View
      if(choice==="left") score -=1;
      if(choice==="right") score +=1;
      sceneIndex = 6;
      scene.src = "NearHomeStreet.png";
      break;

    case 6: // Transition (no choice but tap to continue)
      sceneIndex = 7;
      scene.src = "JuniorCoworker.png";
      break;

    case 7: // Junior Coworker
      if(choice==="left") score -=2;
      sceneIndex = 8;
      scene.src = "InFrontOfHome.png";
      break;

    case 8: // Final Phone Message
      if(choice==="left") score -=2;
      if(choice==="right") score +=2;
      sceneIndex = 9;
      scene.src = "LAST.png";
      updateScore();
      setTimeout(showEnding,3000);
      break;
  }

  updateScore();
}

function showEnding(){
  let gender = Math.random()<0.5 ? "male":"female";

  if(score <=6){
    scene.src = "burned_" + gender + ".png";
  }
  else if(score <=11){
    scene.src = "burning_" + gender + ".png";
  }
  else{
    scene.src = "fresh_" + gender + ".png";
  }
}

// 좌우 터치 감지
document.addEventListener("click",(e)=>{
  if(sceneIndex===9) return;

  let mid = window.innerWidth/2;
  if(e.clientX < mid){
    nextScene("left");
  }else{
    nextScene("right");
  }
});

updateScore();
</script>

</body>
</html>
