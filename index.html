<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SorryImBusy</title>

<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  user-select:none;
}
#scene{
  width:100vw;
  height:100vh;
  object-fit:cover;
  display:block;
}
#score{
  position:absolute;
  top:18px;
  left:18px;
  color:white;
  font-size:18px;
  opacity:0.85;
}
.zone{
  position:absolute;
  top:0;
  width:50%;
  height:100%;
}
#left{ left:0; }
#right{ right:0; }
</style>
</head>

<body>

<div id="score">Score: 10</div>
<img id="scene">

<div id="left" class="zone"></div>
<div id="right" class="zone"></div>

<script>
let score = 10;
let sceneIndex = 0;

const sceneImg = document.getElementById("scene");
const scoreBox = document.getElementById("score");

function updateScore(){
  scoreBox.textContent = "Score: " + score;
}

function setImage(name){
  sceneImg.src = name;
}

const scenes = [

  // Scene 0
  {
    img: "Email Before Leaving Work.png",
    left: ()=>{ score-=1; next(); },
    right: ()=>{ score-=1; next(); }
  },

  // Scene 1
  {
    img: "Message on the Street.png",
    left: ()=>{ score-=1; next(); },
    right: ()=>{ score-=1; next(); }
  },

  // Scene 2
  {
    img: "Subway Entrance.png",
    left: ()=>{ score+=0; next(); },
    right: ()=>{ score+=1; next(); }
  },

  // Scene 3A
  {
    img: "On the Subway Seat.png",
    left: ()=>{ score-=1; goNearHome(); },
    right: ()=>{ score+=0; goNearHome(); }
  },

  // Scene 3B
  {
    img: "Before Riding the Bike.png",
    left: ()=>{ score+=1; next(); },
    right: ()=>{ score+=2; next(); }
  },

  // Scene 4B
  {
    img: "Riding the Bike, Nice View.png",
    left: ()=>{ score-=1; goNearHome(); },
    right: ()=>{ score+=1; goNearHome(); }
  },

  // Scene 5
  {
    img: "Junior Coworker.png",
    left: ()=>{ score-=2; next(); },
    right: ()=>{ score+=0; next(); }
  },

  // Final decision
  {
    img: "In Front of Your Home.png",
    left: ()=>{ score-=2; showEnding(); },
    right: ()=>{ score+=2; showEnding(); }
  }
];

function next(){
  sceneIndex++;
  setImage(scenes[sceneIndex].img);
  updateScore();
}

function goNearHome(){
  setImage("Near Home Street.png");
  setTimeout(()=>{
    sceneIndex = 6;
    setImage(scenes[sceneIndex].img);
    updateScore();
  }, 1200);
}

function showEnding(){
  setImage("LAST.png");

  setTimeout(()=>{
    let gender = (score % 2 === 0) ? "male" : "female";
    let ending;

    if(score>=2 && score<=6) ending = "burned "+gender+".png";
    else if(score<=11) ending = "burnin "+gender+".png";
    else ending = "fresh "+gender+".png";

    setImage(ending);
  },1000);
}

document.getElementById("left").onclick = ()=>{
  if(sceneIndex===2){ sceneIndex=4; setImage(scenes[4].img); return; }
  scenes[sceneIndex].left();
};
document.getElementById("right").onclick = ()=>{
  if(sceneIndex===2){ sceneIndex=3; setImage(scenes[3].img); return; }
  scenes[sceneIndex].right();
};

setImage(scenes[0].img);
updateScore();
</script>

</body>
</html>
