<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sorry I'm Busy</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
  font-family: Arial, sans-serif;
}

#game {
  width: 100vw;
  height: 100vh;
  background-size: cover;
  background-position: center;
  position: relative;
}

.choice-zone {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
}

#leftZone { left: 0; }
#rightZone { right: 0; }

#score {
  position: absolute;
  top: 20px;
  left: 20px;
  color: white;
  font-size: 18px;
  opacity: 0.8;
}
</style>
</head>

<body>

<div id="game">
  <div id="leftZone" class="choice-zone"></div>
  <div id="rightZone" class="choice-zone"></div>
  <div id="score"></div>
</div>

<script>
let score = 10;
let scene = "email";
let route = null;

const game = document.getElementById("game");
const scoreText = document.getElementById("score");

function updateScore(val){
  score += val;
  scoreText.innerText = "Score: " + score;
}

function setScene(img){
  game.style.backgroundImage = `url("${img}")`;
}

function randomGenderImage(type){
  const gender = Math.random() < 0.5 ? "male" : "female";
  return `${type} ${gender}.png`;
}

function ending(){
  let result;

  if(score >= 12){
    result = "fresh";
  } else if(score >= 7){
    result = "burning";
  } else {
    result = "burned";
  }

  const finalImg = randomGenderImage(result);
  setScene(finalImg);

  document.getElementById("leftZone").onclick = null;
  document.getElementById("rightZone").onclick = null;
}

function nextScene(choice){
  switch(scene){

    case "email":
      updateScore(-1);
      scene = "streetMessage";
      setScene("Message on the Street.png");
      break;

    case "streetMessage":
      updateScore(-1);
      scene = "subwayEntrance";
      setScene("Subway Entrance.png");
      break;

    case "subwayEntrance":
      if(choice === "left"){
        route = "subway";
        updateScore(0);
        scene = "subwaySeat";
        setScene("On the Subway Seat.png");
      } else {
        route = "bike";
        updateScore(+1);
        scene = "beforeBike";
        setScene("Before Riding the Bike.png");
      }
      break;

    case "subwaySeat":
      if(choice === "left"){
        updateScore(-1);
      } else {
        updateScore(0);
      }
      scene = "nearHome";
      setScene("Near Home Street.png");
      break;

    case "beforeBike":
      scene = "bikeRide";
      setScene("Riding the Bike, Nice View.png");
      break;

    case "bikeRide":
      if(choice === "left"){
        updateScore(+1);
      } else {
        updateScore(+2);
      }
      scene = "nearHome";
      setScene("Near Home Street.png");
      break;

    case "nearHome":
      if(choice === "left"){
        updateScore(-1);
      } else {
        updateScore(+1);
      }
      scene = "junior";
      setScene("Junior Coworker.png");
      break;

    case "junior":
      if(choice === "left"){
        updateScore(-2);
      } else {
        updateScore(0);
      }
      scene = "frontHome";
      setScene("In Front of Your Home.png");
      break;

    case "frontHome":
      if(choice === "left"){
        updateScore(-2);
      } else {
        updateScore(+2);
      }
      ending();
      break;
  }
}

document.getElementById("leftZone").onclick = () => nextScene("left");
document.getElementById("rightZone").onclick = () => nextScene("right");

updateScore(0);
setScene("Email Before Leaving Work.png");
</script>

</body>
</html>
