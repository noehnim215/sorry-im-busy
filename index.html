<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sorry I'm Busy</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
  font-family: Arial, sans-serif;
}

#game {
  width: 100vw;
  height: 100vh;
  background-size: cover;
  background-position: center;
  position: relative;
}

.choice-zone {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
}

#leftZone { left: 0; }
#rightZone { right: 0; }

#score {
  position: absolute;
  top: 10px;
  left: 10px;
  color: white;
  font-size: 16px;
  opacity: 0.7;
}
</style>
</head>

<body>
<div id="game">
  <div id="score"></div>
  <div id="leftZone" class="choice-zone"></div>
  <div id="rightZone" class="choice-zone"></div>
</div>

<script>
let score = 10;
let scene = 0;
let route = null;

const game = document.getElementById("game");
const scoreText = document.getElementById("score");

function updateScore() {
  scoreText.innerText = "Score: " + score;
}

function setScene(img) {
  game.style.backgroundImage = `url("${img}")`;
}

function nextScene(choice) {
  // Scene 0 — Email
  if(scene === 0){
    score -= 1; // 이메일 확인 = -1
    scene = 1;
    setScene("Message on the Street.png");
  }

  // Scene 1 — Coworker message
  else if(scene === 1){
    score -= 1; // 바로 답장 or 미루기 = 둘 다 -1
    scene = 2;
    setScene("Subway Entrance.png");
  }

  // Scene 2 — Wait subway or bike
  else if(scene === 2){
    if(choice === "right"){
      score += 1; // 자전거 +1
      route = "bike";
      scene = 3;
      setScene("Before Riding the Bike.png");
    }else{
      route = "subway";
      scene = 3;
      setScene("On the Subway Seat.png");
    }
  }

  // Scene 3A — Subway Seat
  else if(scene === 3 && route === "subway"){
    if(choice === "left"){
      score -= 1; // 폰 확인 -1
    }
    scene = 5;
    setScene("Near Home Street.png");
  }

  // Scene 3B — Before Riding Bike
  else if(scene === 3 && route === "bike"){
    scene = 4;
    setScene("Riding the Bike, Nice View.png");
  }

  // Scene 4 — Bike sound choice
  else if(scene === 4){
    if(choice === "left"){
      score += 1; // 노래 듣기 +1
    }else{
      score += 2; // 도심 소리 +2
    }
    scene = 6;
    setScene("Junior Coworker.png");
  }

  // Scene 5 — Near Home (subway route)
  else if(scene === 5){
    scene = 6;
    setScene("Junior Coworker.png");
  }

  // Scene 6 — Junior coworker question
  else if(scene === 6){
    if(choice === "left"){
      score -= 2; // "나 괜찮아..."
    }
    scene = 7;
    setScene("In Front of Your Home.png");
  }

  // Scene 7 — Final phone check
  else if(scene === 7){
    if(choice === "left"){
      score -= 2; // 지금 확인
    }else{
      score += 2; // 폰 잠그기
    }
    scene = 8;
    ending();
  }

  updateScore();
}

function ending(){
  let gender = Math.random() < 0.5 ? "male" : "female";

  setTimeout(()=>{
    if(score <= 6){
      setScene(`burned ${gender}.png`);
    }
    else if(score <= 11){
      setScene(`burning ${gender}.png`);
    }
    else{
      setScene(`fresh ${gender}.png`);
    }
  }, 4000);
}

document.getElementById("leftZone").onclick = () => nextScene("left");
document.getElementById("rightZone").onclick = () => nextScene("right");

// 시작
setScene("Email Before Leaving Work.png");
updateScore();
</script>
</body>
</html>
